<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Mi Blog{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="https://blogandweb.com/wp-content/uploads/2008/12/blogger-ibrandify.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
:root {
  --light-bg: #f9fafb;
  --light-text: #334155;
  --dark-bg: #0f172a;
  --dark-text: #e2e8f0;
}

html, body {
  height: 100%;
  background-color: #f9fafb;
  color: #334155;
  transition: background-color 0.3s ease, color 0.3s ease;
}

html.dark, html.dark body {
  background-color: #0f172a;
  color: #e2e8f0;
}

.main {
  flex: 1;
  background-color: #f9fafb;
}
html.dark .main {
  background-color: #0f172a;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem;
}

/* Cards */
.card {
  background-color: #4b5563;
  border: 1px solid #cbd5e1;
  border-radius: 0.75rem;
  padding: 1.5rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  transition: background-color 0.3s ease;
}
html.dark .card {
  background-color: #1e293b;
  border-color: #334155;
}

/* Form Inputs */
.form-input {
  width: 100%;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  background-color: var(--light-bg);
  color: #334155;
  font-weight: 500;
  border: 1px solid;
  transition: all 0.3s ease;
}
.form-input::placeholder {
  color: #94a3b8;
}
.form-input:focus {
  border-color: #60a5fa;
  box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.5);
}
html.dark .form-input {
  background-color: #1e293b;
  color: var(--dark-text);
  border-color: #475569;
}
html.dark .form-input::placeholder {
  color: #94a3b8;
}

/* Email input (especial) */
#id_email {
  @apply w-full bg-white dark:bg-gray-500 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-800 transition-all duration-300 form-input;
            border: 1px solid;
}

html.dark  #id_email {
  background-color: #1e293b;
  color: var(--dark-text);
  border-color: #475569;
}

/* Botones */
.btn-primary,
.btn-secondary,
.btn-danger,
.btn-outline-primary {
  font-weight: 500;
  border-radius: 2rem;
  padding: 0.75rem 1.5rem;
  border: 2px solid transparent;
  transition: all 0.3s ease, transform 0.3s;
  display: inline-block;
}

.btn-primary {
            @apply bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl;
            background-color: #3b82f6;
            margin-bottom: 1rem;
            border-radius: 2rem;
            font-weight: 500;
            border: 2px solid;
			border-color: #f8fafc;
            padding: 0.75rem 1.5rem; /* Añadido para asegurar el padding */
        }
        .btn-primary:hover {
            background-color: #2563eb;
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }
html.dark .btn-primary {
            background-color: #3b82f6;
            color: #fff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            margin-bottom: 1rem;
            border-radius: 2rem;
            font-weight: 500;
            border: 2px solid;
            padding: 0.75rem 1.5rem; /* Añadido para asegurar el padding */
        }
        html.dark .btn-primary:hover {
            background-color: #2563eb;
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }

.btn-secondary {
  background-color: #475569;
  color: #f8fafc;
  border-color: #f8fafc;
  margin-bottom: 1rem;
  border-radius: 2rem;
  font-weight: 500;
  border: 2px solid;
  padding: 0.75rem 1.5rem; /* Añadido para asegurar el padding */
}
.btn-secondary:hover {
  background-color: #64748b;
  border-color: #3b82f6;
  margin-bottom: 1rem;
  border-radius: 2rem;
  font-weight: 500;
  border: 2px solid;
}
html.dark .btn-secondary {
  background-color: #475569;
  color: #f8fafc;
  border-color: #f8fafc;
  margin-bottom: 1rem;
  border-radius: 2rem;
  font-weight: 500;
  border: 2px solid;
  padding: 0.75rem 1.5rem; /* Añadido para asegurar el padding */
}
html.dark .btn-secondary:hover {
  background-color: #64748b;
  border-color: #3b82f6;
  margin-bottom: 1rem;
  border-radius: 2rem;
  font-weight: 500;
  border: 2px solid;
}

html.dark .btn-outline-primary {
            border-color: #3b82f6;
            color: #3b82f6;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            margin-bottom: 1rem;
            border-radius: 2rem;
            font-weight: 500;
            border: 2px solid;
            padding: 0.75rem 1.5rem; /* Añadido para asegurar el padding */
        }
html.dark .btn-outline-primary:hover {
            background-color: #3b82f6;
            color: #fff;
        }

.btn-danger {
  background-color: #ef4444;
  color: white;
  
  border-color: #3b82f6;
  margin-bottom: 1rem;
  border-radius: 2rem;
  font-weight: 500;
  border: 2px solid;
  padding: 0.75rem 1.5rem; /* Añadido para asegurar el padding */
}
.btn-danger:hover {
  background-color: #dc2626;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.btn-outline-primary {
            @apply border-2 border-blue-600 text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 hover:text-white transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg;
            margin-bottom: 1rem;
            border-radius: 2rem;
            font-weight: 500;
            padding: 0.75rem 1.5rem; /* Añadido para asegurar el padding */
        }
        
        .btn-outline-primary:hover {
        @apply transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg
            border-radius: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            border: 2px solid;
        }

/* Messages */
.messages {
  list-style: none;
  padding: 0;
  margin-bottom: 1rem;
}
.messages li {
  padding: 1rem 1.5rem;
  margin-bottom: 0.5rem;
  border-radius: 0.75rem;
  font-weight: 500;
  border-left: 4px solid;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}
.messages .success {
  background-color: #ecfdf5;
  color: #065f46;
  border-left-color: #10b981;
}
.messages .error {
  background-color: #fef2f2;
  color: #991b1b;
  border-left-color: #ef4444;
}
.messages .info {
  background-color: #eff6ff;
  color: #1e40af;
  border-left-color: #3b82f6;
}
.messages .warning {
  background-color: #fffbeb;
  color: #92400e;
  border-left-color: #f59e0b;
}

/* Dark mode messages */
html.dark .messages .success {
  background-color: #064e3b;
  color: #6ee7b7;
  border-left-color: #34d399;
}
html.dark .messages .error {
  background-color: #7f1d1d;
  color: #fca5a5;
  border-left-color: #f87171;
}
html.dark .messages .info {
  background-color: #1e3a8a;
  color: #93c5fd;
  border-left-color: #60a5fa;
}
html.dark .messages .warning {
  background-color: #78350f;
  color: #fcd34d;
  border-left-color: #fbbf24;
}

/* Navbar */
.navbar {
  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  z-index: 20;
}
html.dark .navbar {
  background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
}

html.dark .gradient-text {
  background-image: linear-gradient(to right, #60a5fa, #c084fc);
}
/* Gradient Text */
        .gradient-text {
            background-image: linear-gradient(to right, #3b82f6, #9333ea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            color: transparent; /* Fallback for browsers that don't support -webkit-text-fill-color */
        }
        
        /* Animaciones */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }

        .animate-fade-in-delay {
            animation: fadeIn 0.8s ease-out 0.3s forwards;
            opacity: 0; /* Asegura que no sea visible antes de la animación */
        }

        .animate-fade-in-delay-2 {
            animation: fadeIn 0.8s ease-out 0.6s forwards;
            opacity: 0;
        }

        .animate-slide-up {
            animation: slideUp 0.6s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ESTILOS ESPECÍFICOS PARA EL MENÚ MÓVIL (id="mobile-menu") */
        /* Fuerza un fondo sólido y opaco para el menú móvil */
        #mobile-menu {
            background: #1a202c !important; /* Fondo sólido oscuro con !important */
            z-index: 9999 !important; /* Z-index muy alto para asegurar que esté encima */
            width: 100vw !important; /* Cubre todo el ancho del viewport */
            height: 100vh !important; /* Cubre toda la altura del viewport */
            top: 0 !important; /* Asegura la posición desde la esquina superior izquierda */
            left: 0 !important;

}

/* ESTILOS ESPECÍFICOS PARA EL MENÚ MÓVIL (id="mobile-menu") */
/* Fuerza un fondo sólido y opaco para el menú móvil */
#mobile-menu {
    background: #1a202c !important; /* Fondo sólido oscuro con !important */
    z-index: 9999 !important; /* Z-index muy alto para asegurar que esté encima */
    width: 100vw !important; /* Cubre todo el ancho del viewport */
    height: 100vh !important; /* Cubre toda la altura del viewport */
    top: 0 !important; /* Asegura la posición desde la esquina superior izquierda */
    left: 0 !important;  
}

/* Cuando tiene la clase "open", se muestra */
#mobile-menu.open { 
  /* Las siguientes líneas son clave para centrar y manejar la visibilidad */
    display: flex; /* Asegura el flexbox */
    justify-content: center; /* Centra verticalmente el contenido */
    align-items: center; /* Centra horizontalmente el contenido */
    transform: translateY(-100%); /* Inicialmente oculto hacia arriba */
    transition: transform 0.3s ease-out; /* Transición suave para aparecer/desaparecer */
	transform: translateY(0); /* Se desliza hacia abajo para mostrarse */
}

/* Estilos para los enlaces/botones dentro del menú móvil (Inicio, Blog, Iniciar Sesión, Registrarse) */
#mobile-menu nav a,
#mobile-menu div a {
    padding: 0.75rem 1.5rem; /* Aumenta el padding para hacerlos más fáciles de tocar */
    border-radius: 0.375rem; /* Bordes más redondeados */
    display: block;
    margin: 0.5rem auto; /* Más espacio vertical y centrado */
    text-align: center;
    text-decoration: none;
    font-weight: 600; /* Un poco más de grosor en la fuente */
    color: white; /* Color de texto inicial para el modo claro */
    transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease; /* Añade transición a transform */
    max-width: 300px; /* Un poco más de ancho máximo */
    width: auto; /* Ocupa la mayor parte del ancho disponible */
}

/* Ajustes específicos para los botones de "Iniciar Sesión" y "Registrarse" que tienen clases adicionales */
#mobile-menu div a.border.border-white.px-4.py-2.rounded-lg {
    border-color: #e2e8f0;
    color: #e2e8f0;
    background-color: transparent;
}

#mobile-menu nav a:hover,
#mobile-menu div a:hover {
    background-color: rgba(0, 0, 0, 0.3);
    color: #e2e8f0;
}

#mobile-menu div a.border.border-white.px-4.py-2.rounded-lg:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: #e2e8f0;
}

/* Estilos para el modo oscuro */
html.dark #mobile-menu {
    background: #0f172a !important; /* Fondo oscuro en modo oscuro con !important */
}

html.dark #mobile-menu nav a,
html.dark #mobile-menu div a {
    color: #e2e8f0; /* Texto claro en modo oscuro */
    border-color: rgba(255, 255, 255, 0.1);
}

html.dark #mobile-menu nav a:hover,
html.dark #mobile-menu div a:hover {
    background-color: rgba(0, 0, 0, 0.3);
    color: #e2e8f0;
}

html.dark #mobile-menu div a.border.border-white.px-4.py-2.rounded-lg {
    border-color: #e2e8f0;
    color: #e2e8f0;
    background-color: transparent;
}

html.dark #mobile-menu div a.border.border-white.px-4.py-2.rounded-lg:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: #e2e8f0;
}

/* Asegura que el botón de cerrar sea visible y esté bien posicionado */
#mobile-menu-close {
    color: #fff;
    position: absolute; /* Posicionamiento absoluto para controlar su lugar */
    top: 1rem; /* Margen desde arriba */
    right: 1rem; /* Margen desde la derecha */
    z-index: 9999; /* Asegura que esté por encima de todo */
}

/* Otros estilos para el botón de cerrar (si no los tienes) */
#mobile-menu-close svg {
    width: 32px; /* Un poco más grande para facilitar el toque */
    height: 32px;
}

        /* Menú hamburguesa: estilo del botón (estos estilos ya los tenías y están bien) */
        .menu-hamburguesa,
        .hamburger-btn,
        .nav-toggle {
            background-color: rgba(59, 130, 246, 0.9); /* azul con opacidad alta */
            border: none;
            padding: 0.5rem 0.7rem;
            border-radius: 0.375rem; /* bordes redondeados */
            cursor: pointer;
            z-index: 1000; /* para que quede encima */
            transition: background-color 0.3s ease;
        }

        .menu-hamburguesa:hover,
        .hamburger-btn:hover,
        .nav-toggle:hover {
            background-color: rgba(59, 130, 246, 1); /* fondo totalmente sólido al pasar el mouse */
        }

        /* Opcional: ajustar tamaño del icono hamburguesa */
        .menu-hamburguesa svg,
        .hamburger-btn svg,
        .nav-toggle svg {
            width: 24px;
            height: 24px;
            fill: white; /* icono blanco para buen contraste */
        }
</style>

    {% block extra_head %}{% endblock %}
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300 min-h-screen flex flex-col">
    <header class="navbar p-4 shadow-md sticky top-0 z-50 py-12 px-4 sm:px-6 lg:px-8 " style="padding: 0.2rem 1rem;">
    <div class="container flex justify-between items-center">
	<div class="flex-1">
        <a href="{% url 'home' %}" class="text-2xl font-bold text-white flex items-center space-x-2">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13.5m0-13.5C10.834 5.46 9.47 5 8 5c-4 0-5 3-5 5a7 7 0 0013.568 3.568m-4.5-4.5c1.11 0 2.027-.365 2.83-1.124M15 11a3 3 0 11-6 0 3 3 0 016 0zm-6 0v2m0 0H9m-6.538 4.634A9 9 0 0112 18.255"></path>
            </svg>
            <span>Mi Blog</span>
        </a>
   </div>
        <nav class="hidden md:flex space-x-6 justify-center">

            <a href="{% url 'home' %}" class="text-white hover:text-blue-200 font-medium">Inicio</a>
            <a href="{% url 'blog:post_list' %}" class="text-white hover:text-blue-200 font-medium">Blog</a>
            {% if user.is_superuser or user.profile.is_editor %}
                <a href="{% url 'blog:post_create' %}" class="text-white hover:text-blue-200 font-medium">Crear Post</a>
            {% endif %}
        </nav>

        <div class="flex-1 flex items-center justify-end space-x-4">
            {% if user.is_authenticated %}
                <div class="relative group hidden md:block">
                    <a href="#" class="text-white hover:text-blue-200 flex items-center font-medium">
                        {{ user.username }}
                        <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </a>
                    <div class="absolute right-0 mt-2 w-45 bg-white dark:bg-gray-700 rounded-md shadow-lg py-1 z-20 opacity-0 group-hover:opacity-100 group-hover:translate-y-0 translate-y-2 transition-all pointer-events-none group-hover:pointer-events-auto">
                        {% if user.is_staff %}
                            <a href="{% url 'admin:index' %}" class="block px-4 py-2 text-purple-400 dark:text-purple-400 hover:text-white dark:hover:text-white hover:bg-gray-500 dark:hover:bg-gray-500">Administración</a>
                        {% endif %}
                        <form action="{% url 'logout' %}" method="post">
                            {% csrf_token %}
                            <button type="submit" class="block w-full text-left px-4 py-2 text-red-400 dark:text-red-400 hover:text-red-900 dark:hover:text-red-900 hover:bg-red-400 dark:hover:bg-red-400">
                                Cerrar Sesión
                            </button>
                        </form>
                    </div>
                </div>
            {% else %}
                <a href="{% url 'login' %}" class="hidden md:inline btn-secondary-inverted px-4 py-2 rounded-lg text-white border-2 border-white hover:bg-white hover:text-blue-600">Iniciar Sesión</a>
                <a href="{% url 'register' %}" class="hidden md:inline btn-primary-inverted px-4 py-2 rounded-lg bg-white text-blue-600 hover:bg-blue-100">Registrarse</a>
            {% endif %}

            <button id="theme-toggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                <svg id="sun-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                <svg id="moon-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                </svg>
            </button>

            <button id="mobile-menu-button" class="md:hidden p-2 text-white focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
    </div>

    <div id="mobile-menu" class="fixed inset-0 bg-gray-900 bg-opacity-95 z-50 hidden flex flex-col justify-between items-center text-white transition-transform duration-300 transform translate-y-full w-full h-full">

    <div class="w-full flex justify-end p-4">
        <button id="mobile-menu-close" class="p-2 text-white">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>
    </div>

    <nav class="flex flex-col space-y-6 text-xl text-center mt-auto">
        <a href="{% url 'home' %}" class="hover:text-blue-400">Inicio</a>
        <a href="{% url 'blog:post_list' %}" class="hover:text-blue-400">Blog</a>
        {% if user.is_superuser or user.profile.is_editor %}
            <a href="{% url 'blog:post_create' %}" class="hover:text-blue-400">Crear Post</a>
        {% endif %}
    </nav>

    <div class="flex flex-col space-y-4 text-xl mb-12 mt-auto">
        {% if user.is_staff %}
                            <a href="{% url 'admin:index' %}" class="text-lg border border-white px-4 py-2 rounded-lg hover:bg-gray-600 dark:hover:bg-gray-600" style="padding: 0.5rem; border-radius: 0.75rem;">Administración</a>
                        {% endif %}
        {% if user.is_authenticated %}
            <form action="{% url 'logout' %}" method="post">
                {% csrf_token %}
                <button type="submit" class="hover:bg-red-400 dark:hover:bg-red-400 text-lg border border-white px-4 py-2 rounded-lg" style="display: block; margin: 0.5rem auto; border-radius: 0.75rem; ">Cerrar Sesión</button>
            </form>
        {% else %}
            <a href="{% url 'login' %}" class="hover:text-blue-400 text-lg border border-white px-4 py-2 rounded-lg">Iniciar Sesión</a>
            <a href="{% url 'register' %}" class="hover:text-blue-400 text-lg border border-white px-4 py-2 rounded-lg">Registrarse</a>
        {% endif %}
    </div>
</div>

</header>


    <main class="w-full bg-white dark:bg-slate-900">
  <div class="container px-4 sm:px-6 lg:px-8 py-8">

        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
            {% block content %}{% endblock %}
  </div>
</main>


    <footer class="bg-gray-900 dark:bg-gray-600 text-white py-6 mt-auto shadow-inner" style="padding: 0.2rem 1rem;">
        <div class="container text-center text-gray-400">
            <p><a href="https://github.com/EzequielEdOjeda/Blog_Django" class="hover:text-blue-400 transition-colors duration-300">Por @EzequielEdOjeda.</a> &copy;{% now "Y" %} </p>
        </div>
    </footer>

    {% block extra_scripts %}{% endblock %}
    
    <script>
const mobileMenuBtn = document.getElementById('mobile-menu-button');
const mobileMenu = document.getElementById('mobile-menu');
const mobileMenuClose = document.getElementById('mobile-menu-close');
const themeToggle = document.getElementById('theme-toggle');
const sunIcon = document.getElementById('sun-icon');
const moonIcon = document.getElementById('moon-icon');
const htmlEl = document.documentElement;

// Función para abrir el menú móvil
function openMobileMenu() {
    mobileMenu.classList.add('open'); // Agrega la clase 'open' para mostrarlo
    // Puedes también añadir 'overflow-hidden' al body para evitar el scroll del contenido principal
    document.body.style.overflow = 'hidden';
}

// Función para cerrar el menú móvil
function closeMobileMenu() {
    mobileMenu.classList.remove('open'); // Remueve la clase 'open' para ocultarlo
    document.body.style.overflow = ''; // Restaura el scroll del body
}

mobileMenuBtn.addEventListener('click', openMobileMenu);
mobileMenuClose.addEventListener('click', closeMobileMenu);

// Cerrar el menú al hacer clic en un enlace del menú
mobileMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
        // Un pequeño retraso para permitir la navegación antes de cerrar
        setTimeout(closeMobileMenu, 200);
    });
});

// Ocultar el menú móvil al hacer scroll (cuando está abierto)
let lastScrollY = window.scrollY;

window.addEventListener('scroll', () => {
    if (mobileMenu.classList.contains('open')) {
        const currentScrollY = window.scrollY;
        // Si el usuario se desplaza hacia abajo y el menú está abierto, ciérralo
        if (currentScrollY > lastScrollY && currentScrollY > 50) { // Un pequeño umbral para evitar cierres accidentales
            closeMobileMenu();
        }
    }
    lastScrollY = window.scrollY;
});

// Lógica de cambio de tema (déjala como está si ya funciona bien)
function toggleTheme() {
    if (htmlEl.classList.contains('dark')) {
        htmlEl.classList.remove('dark');
        sunIcon.classList.add('hidden');
        moonIcon.classList.remove('hidden');
    } else {
        htmlEl.classList.add('dark');
        sunIcon.classList.remove('hidden');
        moonIcon.classList.add('hidden');
    }
    localStorage.setItem('theme', htmlEl.classList.contains('dark') ? 'dark' : 'light');
}

themeToggle.addEventListener('click', toggleTheme);

// Cargar el tema guardado al inicio
const savedTheme = localStorage.getItem('theme');
const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
    htmlEl.classList.add('dark');
    sunIcon.classList.remove('hidden');
    moonIcon.classList.add('hidden'); // Asegurarse de que el icono de la luna esté oculto si el tema es oscuro
} else {
    sunIcon.classList.add('hidden'); // Asegurarse de que el icono del sol esté oculto si el tema es claro
    moonIcon.classList.remove('hidden');
}
</script>
</body>
</html>
